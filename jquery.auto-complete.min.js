// jQuery autoComplete v1.0.6
// https://github.com/Pixabay/jQuery-autoComplete
!function(e){e.fn.autoComplete=function(t){var s=e.extend({},e.fn.autoComplete.defaults,t);return"string"==typeof t?(this.each(function(){var s=e(this);"destroy"==t&&(e(window).off("resize.autocomplete",s.updateSC),s.off("keydown.autocomplete keyup.autocomplete"),s.data("autocomplete")?s.attr("autocomplete",s.data("autocomplete")):s.removeAttr("autocomplete"),e(s.data("el")).remove(),s.removeData("el").removeData("autocomplete"))}),this):this.each(function(){function t(e){var t=o.val();if(o.cache[t]=e,e.length&&t.length>=s.minChars){var a="";for(i=0;i<e.length;i++)a+=s.renderItem(e[i],t);o.sc.html(a),o.updateSC(0)}else o.sc.hide()}var o=e(this);o.sc=e('<div class="autocomplete-suggestions"></div>').addClass(s.menuClass),o.data("el",o.sc).data("autocomplete",o.attr("autocomplete")),o.attr("autocomplete","off"),o.cache={},o.last_val="",o.updateSC=function(t,s){if(o.sc.css({top:o.offset().top+o.outerHeight(),left:o.offset().left,width:o.outerWidth()}),!t&&(o.sc.show(),o.sc.maxHeight||(o.sc.maxHeight=parseInt(o.sc.css("max-height"))),o.sc.suggestionHeight||(o.sc.suggestionHeight=e(".autocomplete-suggestion",o.sc).first().outerHeight()),o.sc.suggestionHeight))if(s){var a=o.sc.scrollTop(),c=s.offset().top-o.sc.offset().top;c+o.sc.suggestionHeight-o.sc.maxHeight>0?o.sc.scrollTop(c+o.sc.suggestionHeight+a-o.sc.maxHeight):0>c&&o.sc.scrollTop(c+a)}else o.sc.scrollTop(0)},e(window).on("resize.autocomplete",o.updateSC),o.sc.appendTo("body"),o.sc.on("mouseleave.autocomplete",".autocomplete-suggestion",function(){e(".autocomplete-suggestion.selected").removeClass("selected")}),o.sc.on("mouseenter.autocomplete",".autocomplete-suggestion",function(){e(".autocomplete-suggestion.selected").removeClass("selected"),e(this).addClass("selected")}),o.sc.on("mousedown.autocomplete",".autocomplete-suggestion",function(t){var a=e(this),c=a.data("val");o.val(c),s.onSelect(t,c,a),setTimeout(function(){o.focus().sc.hide()},10)}),o.blur(function(){try{over_sb=e(".autocomplete-suggestions:hover").length}catch(t){over_sb=0}over_sb||(o.last_val=o.val(),o.sc.hide())}),o.sc.focus(function(){o.focus()}),o.on("keydown.autocomplete",function(t){if(40==t.which&&o.sc.html()){var a,c=e(".autocomplete-suggestion.selected",o.sc);return c.length?(a=c.next(".autocomplete-suggestion"),a.length?(c.removeClass("selected"),o.val(a.addClass("selected").data("val"))):(c.removeClass("selected"),o.val(o.last_val),a=0)):(a=e(".autocomplete-suggestion",o.sc).first(),o.val(a.addClass("selected").data("val"))),o.updateSC(0,a),!1}if(38==t.which&&o.sc.html()){var a,c=e(".autocomplete-suggestion.selected",o.sc);if(c.length){var a=c.prev(".autocomplete-suggestion");a.length?(c.removeClass("selected"),o.val(a.addClass("selected").data("val"))):(c.removeClass("selected"),o.val(o.last_val),a=0)}else a=e(".autocomplete-suggestion",o.sc).last(),o.val(a.addClass("selected").data("val"));return o.updateSC(0,a),!1}if(27==t.which)o.val(o.last_val).sc.hide();else if(13==t.which){var c=e(".autocomplete-suggestion.selected",o.sc);c.length&&(s.onSelect(t,c.data("val"),c),setTimeout(function(){o.focus().sc.hide()},10))}}),o.on("keyup.autocomplete",function(a){if(!~e.inArray(a.which,[27,38,40,37,39])){var c=o.val();if(c.length>=s.minChars){if(c!=o.last_val){if(o.last_val=c,clearTimeout(o.timer),s.cache){if(c in o.cache)return void t(o.cache[c]);for(i=1;i<c.length-s.minChars;i++){var l=c.slice(0,c.length-i);if(l in o.cache&&!o.cache[l].length)return void t([])}}o.timer=setTimeout(function(){s.source(c,t)},s.delay)}}else o.last_val=c,o.sc.hide()}})})},e.fn.autoComplete.defaults={source:0,minChars:3,delay:100,cache:1,menuClass:"",renderItem:function(e,t){var s=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(s,"<b>$1</b>")+"</div>"},onSelect:function(e,t,s){}}}(jQuery);